function colourChanger(o){return o=6.29-o,Math.floor(72+55*o)<255||Math.floor(214+14*o)<255?"rgb(51,51,51)":"rgb(255,0,0)"}function beginTimer(o){var c=new Date;countDownClock(c=c.getTime(),o),$clock.show(),$timer.show()}function countDownClock(o,c){var l=new Date;window.intOffset=c-(l.getTime()-o),$timer.html(Math.ceil(window.intOffset/1e3)),window.intAngle=.0001048335*window.intOffset;var i=document.getElementById("clock");if(i.getContext){var t=i.getContext("2d");t.clearRect(0,0,300,300),t.beginPath(),t.globalAlpha=1,t.arc(150,150,140,0,6.283,!1),t.arc(150,150,105,6.283,2*Math.PI,!0),t.fillStyle="#fde800",t.fill(),t.closePath(),t.beginPath(),t.globalAlpha=1,t.arc(150,150,120.1,-1.57,-1.57+window.intAngle,!1),t.arc(150,150,105,-1.57+window.intAngle,2*Math.PI-1.57,!0),t.fillStyle=colourChanger(window.intAngle),t.fill(),t.closePath(),t.beginPath(),t.arc(150,150,105,0,6.283,!1),t.fillStyle="#fde800",t.fill(),t.closePath()}window.intOffset<=0?timeUp():window.t=setTimeout("countDownClock("+o+","+c+")",50)}function clockPause(o,c){pauseTime=100,diff=o/pauseTime,c?(percentage=1-diff,percentage<0&&(percentage=0)):(percentage=diff,percentage>1&&(percentage=1));var l=document.getElementById("clock");if(l.getContext){var i=l.getContext("2d");i.clearRect(0,0,300,300),i.beginPath(),i.globalAlpha=1,i.arc(150,150,140,0,6.283,!1),i.arc(150,150,105,6.283,2*Math.PI,!0),i.fillStyle="#fde800",i.fill(),i.closePath(),i.beginPath(),i.globalAlpha=1,i.arc(150,150,140.1,-1.57,-1.57+window.intAngle,!1),i.arc(150,150,105,-1.57+window.intAngle,2*Math.PI-1.57,!0),i.fillStyle=colourChanger(window.intAngle),i.fill(),i.closePath(),i.beginPath(),i.arc(150,150,105*percentage,0,6.283,!1),i.fillStyle="#fde800",i.fill(),i.closePath(),o<pauseTime&&setTimeout(function(){clockPause(o+10,c)},10)}}function timeUp(){$("#happy").modal("hide")}$(document).ready(function(){$(".b-form-clear").click(function(){var o=$(this).parent().parent();o.find("input").each(function(){$(this).val("")}),o.submit()})}),function(o){"use strict";function c(o,c){this.$el=o,this.$form=c,this.$header=o.find(".dvnazv"),this.$color=o.find(".color"),this.$size=o.find(".size"),this.$btn=o.find(".red-button")}o(function(){var l=o(".b-catalog__item"),i=o("#kupitDeshevle-katalog");console.log(i.length),o.each(l,function(){new c(o(this),i).init()})}),c.prototype={constructor:c,init:function(){this.bindEvents()},bindEvents:function(){this.$btn.on("click",o.proxy(function(){var o={header:this.$header.html(),size:this.$size.find("li.active").html(),color:this.$color.find(".swiper-pagination-style.active").find("div").html()};console.log(this.$form.find(".b-catalog__inp-model").length),this.$form.find(".b-catalog__inp-model").val(o.header),this.$form.find(".b-catalog__inp-color").val(o.color),this.$form.find(".b-catalog__inp-size").val(o.size)},this))}}}(jQuery),function(o){function c(o){this.$el=o,this.$submit=o.find("button"),console.log(o)}o(function(){var l=o("form");o.each(l,function(){new c(o(this)).init()});var i=o(".b-form__ok");if(i.length){var t=i.find(".i-close");t.on("click",function(){i.parent(".b-form__ok__wrap").hide()}),setTimeout(function(){t.trigger("click")},5e3)}});var l={"e-mail":/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/i,phone:/^\+?\d{6,}$/};c.prototype={constructor:c,init:function(){this.getAllFields(),this.bindEvents()},getAllFields:function(){this.$fields=this.$el.find(".form-group"),this.$fieldsToValid=this.$fields.find("[data-validation]").add(this.$el.find("textarea[data-validation]"))},bindEvents:function(){this.$submit.on("click",o.proxy(function(o){console.log("submit",this.validate()),o.preventDefault(),this.validate()&&(this.addPreloader(),console.log("asd",this.$el),this.$el.trigger("submit"))},this))},validate:function(){var c=!0,i=this;return o.each(this.$fieldsToValid,function(){function t(){n.addClass("invalid"),c=!1,i.$fieldsToValid.filter(".phonemask").trigger("focus").val("")}var n=o(this),e=n.val(),a=n.data("validation");switch(a){case"number":!function(){if(!Number(e)||e<0||e>99)return t(),!1;n.removeClass("invalid")}();break;case"required":e.length?n.removeClass("invalid"):t();break;default:l[a].test(e)?n.removeClass("invalid"):t()}}),c},iCanAddFile:function(){var o=this.$el.find("input[type=file]");if(o.length){var c=this.$el.find(".js-sketch");c.on("click",function(c){c.preventDefault(),o.trigger("click")}),o.change(function(){c.html("Эскизы загружены")})}},addMask:function(){var o=this.$el.find(".input-phone");o.length&&o.mask("8 (999) 999-99-99")},addPreloader:function(){o("#loader-wrapper").show()},comagicGo:function(){var o=this.$fields.filter("._name"),c={name:o.length?o.find("input").val():"-",email:"-",phone:this.$fields.filter("._phone").find("input").val(),message:this.message},l=this;try{Comagic.addOfflineRequest(c)}catch(o){}setTimeout(function(){l.$el.trigger("submit")},2e3)}}}(jQuery),function(o){function c(c){jQuery(".jcarousel-control_bx_3218110189_517 div div a").bind("click",function(){return c.scroll(jQuery.jcarousel.intval(jQuery(this).attr("ttt"))),o(this).parent().parent().is(o(".jcarousel-control_bx_3218110189_517 div.jcontr").last()),o(this).parent().parent().parent().find(".icocol").removeClass("icocolact"),o(this).parent().addClass("icocolact"),!1})}function l(c){jQuery(".jcarousel-control_bx_3218110189_518 div div a").bind("click",function(){return c.scroll(jQuery.jcarousel.intval(jQuery(this).attr("ttt"))),o(this).parent().parent().is(o(".jcarousel-control_bx_3218110189_518 div.jcontr").last()),o(this).parent().parent().parent().find(".icocol").removeClass("icocolact"),o(this).parent().addClass("icocolact"),!1})}jQuery(document).ready(function(){jQuery("#dvkarusel_bx_3218110189_517").jcarousel({scroll:1,wrap:"circular",initCallback:c}),o(".jjcontrolout_bx_3218110189_517").appendTo(".jjcontrolin_bx_3218110189_517"),o("#dvkarusel_bx_3218110189_517 .jcarousel-prev").click(function(){var c=o(".jcarousel-control_bx_3218110189_517").find(".icocolact").parent().index(".jcarousel-control_bx_3218110189_517 .jcontr");o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(0).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_517").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(-1).children(".icocol").addClass("icocolact")):o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(0).children(".icocol").hasClass("icocolact")&&o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(1).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_517").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(0).children(".icocol").addClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(-1).children(".icocol").addClass("icocolact")):(o(".jjcontrolin_bx_3218110189_517").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(c).prev(".jcontr").children(".icocol").addClass("icocolact"))}),o("#dvkarusel_bx_3218110189_517 .jcarousel-next").click(function(){var c=o(".jcarousel-control_bx_3218110189_517").find(".icocolact").parent().index(".jcarousel-control_bx_3218110189_517 .jcontr");o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(-1).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_517").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(0).children(".icocol").addClass("icocolact")):o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(-1).children(".icocol").hasClass("icocolact")&&o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(-2).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_517").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(0).children(".icocol").addClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(-1).children(".icocol").addClass("icocolact")):(o(".jjcontrolin_bx_3218110189_517").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_517 .jcontr").eq(c).next(".jcontr").children(".icocol").addClass("icocolact"))})}),jQuery(document).ready(function(){jQuery("#dvkarusel_bx_3218110189_518").jcarousel({scroll:1,wrap:"circular",initCallback:l}),o(".jjcontrolout_bx_3218110189_518").appendTo(".jjcontrolin_bx_3218110189_518"),o("#dvkarusel_bx_3218110189_518 .jcarousel-prev").click(function(){var c=o(".jcarousel-control_bx_3218110189_518").find(".icocolact").parent().index(".jcarousel-control_bx_3218110189_518 .jcontr");o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(0).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_518").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(-1).children(".icocol").addClass("icocolact")):o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(0).children(".icocol").hasClass("icocolact")&&o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(1).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_518").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(0).children(".icocol").addClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(-1).children(".icocol").addClass("icocolact")):(o(".jjcontrolin_bx_3218110189_518").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(c).prev(".jcontr").children(".icocol").addClass("icocolact"))}),o("#dvkarusel_bx_3218110189_518 .jcarousel-next").click(function(){var c=o(".jcarousel-control_bx_3218110189_518").find(".icocolact").parent().index(".jcarousel-control_bx_3218110189_518 .jcontr");o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(-1).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_518").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(0).children(".icocol").addClass("icocolact")):o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(-1).children(".icocol").hasClass("icocolact")&&o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(-2).children(".icocol").hasClass("icocolact")?(o(".jjcontrolin_bx_3218110189_518").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(0).children(".icocol").addClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(-1).children(".icocol").addClass("icocolact")):(o(".jjcontrolin_bx_3218110189_518").find(".icocol").removeClass("icocolact"),o(".jcarousel-control_bx_3218110189_518 .jcontr").eq(c).next(".jcontr").children(".icocol").addClass("icocolact"))})})}(jQuery);var $clock=$("#clock"),$timer=$("#timer"),$start=$("#start"),$pause=$("#pause"),$continue=$("#continue");$(function(){$start.on("click",function(o){o.preventDefault(),beginTimer(6e4)})}),function(o){o(window).load(function(){o(function(){o(".inpfilefile").change(function(){o(".inpfile").removeClass("inpfile").addClass("inpfilevyb")})})})}(jQuery);